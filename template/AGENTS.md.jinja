# Agent Workflow Notes

_Read this first: these notes are for automation agents working in this repository. They highlight the expectations, required tools, and references to consult before making changes._

## Quickstart Checklist
- Prefer editor-style patch operations (apply_patch or equivalent) for edits; reach for shell commands only when scripted workflows are unavoidable.
- Run `uv run poe fix` for auto-fixes, then `uv run poe lint`, `uv run poe typecheck` and, if reasonable `uv run poe test` before handing work off.
- Before attempting manual lint fixes, ensure that `uv run poe fix` was run.
- If a required tool/command is missing or blocked, stop and ask the user rather than guessing.
- Do not introduce new runtime or development dependencies without explicit user approval; confirm intent before touching `pyproject.toml`.
- Escalate blockers instead of weakening domain invariants or bypassing documented policies.

## Tooling & Configuration
- Use `uv` (`uv sync --group dev`, `uv run ...`) so results match CI and pre-commit.
- Repository configuration (formatter, linter, type-checker settings) lives in `pyproject.toml`.

## Process Reminders
- Keep worktrees clean: do not create commits without user direction, stage only what belongs to the current proposal.
- Before running `git commit`, ask the user for explicit approval in this session.
- When drafting commit messages, use conventional scope keywords (`feat`, `bugfix`, `docs`, `test`, `tooling`, `refactor`, `chore`, etc.) followed by a concise summary so history stays scannable.
- Seek guidance instead of forcing changes past failing quality gates.
- After one failed lint/typing fix attempt, hand control back to the user; don't keep iterating
